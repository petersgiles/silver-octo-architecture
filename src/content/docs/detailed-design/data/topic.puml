@startuml
!include ../../includes/theme.iuml
!include ../../includes/erd.iuml

hide methods
hide stereotypes

title ERD : Topic

' entities

Table(user, "user") {
    primary_key(id)  number
}

Table(topic, "topic") {
    primary_key(id)  number
    not_null(type_of_topic)  number
}

Table(type_of_topic, "type_of_topic") {
    primary_key(id)  number
    not_null(caption) string
    not_null(details) string
    
}

Table(attribute, "attribute") {
    unique(topic)  number
    unique(type_of_attribute)  number
    Value NVARCHAR[666]
    Text NVARCHAR[MAX]
    not_null(active)  number
    not_null(lastupdated) UTCDATETIME    
}

Table(type_of_attribute, "type_of_attribute") {
    primary_key(id)  number
    not_null(caption) string
    not_null(details) string
}

Table(display_hint, "display_hint") {
    primary_key(id)  number
    not_null(caption) string
    not_null(format) string
}


Table(relationship, "relationship") {
    primary_key(id)  number
    not_null(relationship_to_topic_1)  number
    not_null(relationship_to_topic_2)  number
    not_null(type_of_relationship)  number
    not_null(caption) string
}


Table(type_of_relationship, "type_of_relationship") {
    primary_key(id)  number
    not_null(caption) string
    not_null(details) string
}

' relationships

topic "*".."1" type_of_topic : "Is a"
attribute "*".."1" type_of_attribute :  "Is a"
type_of_attribute "1".."*" display_hint : "Has"

topic "1".."*" attribute : "Has many"
relationship "*".."1" type_of_relationship :  "Is a"

relationship "1" .. "1" topic :  "Relationship 1"
relationship "1" .. "1" topic :  "Relationship 2"

user "1".."*" type_of_topic : "Owns"
user "1".."*" type_of_relationship : "Owns"
user "1".."*" type_of_attribute : "Owns"
user "1".."*" display_hint : "Owns"

@enduml